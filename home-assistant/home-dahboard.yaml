decluttering_templates:
  navigation_header:
    card:
      type: vertical-stack
      cards:
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: |-
                {{ 
                'mdi:home' if states('sensor.is_anyone_home') == 'True' 
                else 'mdi:home-off' 
                }}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/home
              icon_color: |-
                {{ 
                'green' if states('sensor.is_anyone_home') == 'True' 
                else 'red' 
                }}
              hold_action:
                action: none
              double_tap_action:
                action: none
              fill_container: true
              badge_icon: |-
                {% set people_at_home=states('sensor.number_of_people_home') | int %}
                {{ 'mdi:numeric-' ~ people_at_home if people_at_home > 0 else '' }}
              badge_color: orange
              multiline_secondary: false
            - type: custom:mushroom-light-card
              secondary_info: none
              show_brightness_control: false
              show_color_temp_control: false
              use_light_color: true
              collapsible_controls: false
              layout: vertical
              primary_info: none
              icon_type: icon
              double_tap_action:
                action: call-service
                data: {}
                target:
                  entity_id: light.group_all
                perform_action: light.turn_off
              tap_action:
                action: navigate
                navigation_path: /lovelace/lights
              hold_action:
                action: none
              entity: light.lampen_zonder_keuken
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: mdi:account-group-outline
              icon_color: |-
                {% if states('sensor.is_anyone_home') == 'False' %}
                  green
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/persons
              fill_container: true
              hold_action:
                action: none
              double_tap_action:
                action: none
              badge_icon: ''
              badge_color: ''
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: |-
                {% if is_state("sensor.is_any_mediaplayer_playing", "True") %}
                  mdi:music
                {% else %} 
                  mdi:music-off
                {% endif %}
              icon_color: |-
                {% if is_state("sensor.is_any_mediaplayer_playing", "True") %}
                  green
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/mediaplayers
              fill_container: true
              hold_action:
                action: none
              double_tap_action:
                action: none
              badge_icon: >-
                {% set active_mediaplayers =
                states('sensor.mediaplayers_active_count') | int %}

                {{ 'mdi:numeric-' ~ active_mediaplayers if active_mediaplayers > 0
                else '' }}
              badge_color: ''
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: >-
                {% set temperature = (state_attr('climate.thermostat', 'temperature')
                | default(15)) %}

                {% if temperature is none %}
                  mdi:alert-decagram-outline
                {% elif is_state("binary_sensor.hot_tap_water", "on") %}
                  mdi:water-pump
                {% elif temperature <= 15%}
                  mdi:thermometer
                {% elif temperature < 20.5 %}
                  mdi:radiator
                {% else %}
                  mdi:fire
                {% endif %}
              icon_color: >-
                {% set temperature = (state_attr('climate.thermostat', 'temperature')
                | default(15)) %}

                {% if  temperature is none or is_state("binary_sensor.hot_tap_water",
                "on") %}
                  red
                {% elif temperature <= 15%}
                  disabled
                {% elif temperature < 19.5 %}  
                  yellow
                {% elif temperature <  19.9 %}
                  orange
                {% else %}
                  red
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/verwarming
              fill_container: true
              badge_icon: ''
              picture: ''
              hold_action:
                action: none
              double_tap_action:
                action: none
              badge_color: ''
              entity: climate.thermostat
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: mdi:recycle-variant
              icon_color: >
                {% set upcomming_trash =
                states('sensor.afvalinfo_first_upcomming_trash_type') %}

                {% if 'Papier' in upcomming_trash %}
                  blue
                {% elif 'PBD' in upcomming_trash %}
                  pink
                {% elif 'GFT' in upcomming_trash %}
                  green
                {% else %} 
                  red
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/afval
              fill_container: true
              badge_icon: ''
              picture: ''
              hold_action:
                action: none
              double_tap_action:
                action: none
              badge_color: ''
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: >
                {% set onlinestate =
                is_state("binary_sensor.internet_troubleshooting", "on") %}

                {% if onlinestate %}

                mdi:web-check

                {% else %}

                mdi:web-off

                {% endif %}
              hold_action:
                action: none
              double_tap_action:
                action: none
              tap_action:
                action: navigate
                navigation_path: /lovelace/internet
              icon_color: >
                {% set onlinestate =
                is_state("binary_sensor.internet_troubleshooting", "on") %}

                {% if onlinestate %}
                green
                {% else %}
                red
                {% endif %}
              layout: vertical
              fill_container: true
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: mdi:racing-helmet
              icon_color: ''
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/f1
              fill_container: true
              hold_action:
                action: none
              double_tap_action:
                action: none
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: mdi:server-outline
              icon_color: >-
                {% set current_cpu =
                states('sensor.buurmansbignas_cpu_gebruik_totaal') | int %}

                {% if current_cpu < 10 %}
                  blue
                {% elif current_cpu < 30 %}
                  green
                {% elif current_cpu < 50 %}
                  yellow
                {% elif current_cpu < 75 %}
                  orange
                {% else %}
                  red
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/homelab
              fill_container: true
              hold_action:
                action: none
              double_tap_action:
                action: none
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: >-
                {% set lowest_battery = states('sensor.lowest_battery_percentage') |
                int %}

                {% if lowest_battery < 10 %}
                  mdi:battery-10
                {% elif lowest_battery < 20 %}
                  mdi:battery-20
                {% elif lowest_battery < 30 %}
                  mdi:battery-30
                {% elif lowest_battery < 40 %}
                  mdi:battery-40
                {% elif lowest_battery < 50 %}
                  mdi:battery-50
                {% elif lowest_battery < 60 %}
                  mdi:battery-60
                {% elif lowest_battery < 70 %}
                  mdi:battery-70
                {% elif lowest_battery < 80 %}
                  mdi:battery-80
                {% elif lowest_battery < 90 %}
                  mdi:battery-90
                {% else %}
                  mdi:battery-check
                {% endif %}
              icon_color: >-
                {% set lowest_battery = states('sensor.lowest_battery_percentage') |
                int %}

                {% if lowest_battery < 20 %}
                  red
                {% elif lowest_battery < 30 %}
                  orange
                {% elif lowest_battery < 40 %}
                  yellow
                {% else %}
                  green
                {% endif %}
              layout: vertical
              tap_action:
                action: navigate
                navigation_path: /lovelace/battery
              fill_container: false
              badge_icon: ''
              hold_action:
                action: none
              double_tap_action:
                action: none

views:
  - title: Home
    type: custom:vertical-layout
    theme: buurmans-bubble-theme
    icon: mdi:home
    path: home
    badges: []
    cards:
      - type: conditional
        conditions:
          - entity: binary_sensor.backups_stale
            state_not: 'off'
        card:
          type: markdown
          content: >-
            Backups are stale! Please visit the "Home Assistant Google Drive
            Backup" add-on status page for details.
          title: Stale Backups!
      - type: entities
        entities:
          - entity: sensor.stef_mobiel_hoogte
            name: Hoogte
            secondary_info: last-updated
          - entity: binary_sensor.stef_mobiel_motion
            name: Beweging
            secondary_info: last-updated
          - entity: sensor.stef_mobiel_snelheid
            name: Snelheid
            secondary_info: last-changed
        theme: buurmans-bubble-theme
        visibility:
          - condition: and
            conditions:
              - condition: state
                entity: device_tracker.stef_mobiel
                state: not_home
              - condition: state
                entity: binary_sensor.stef_mobiel_status
                state: 'on'
        state_color: true
        title: Stef Traccar
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.chantal
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/chantal
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_chantal_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_chantal"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.chantal_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.chantal_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.chantal_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.chantal_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.chantal_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_chantal"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_chantal"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.stef
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/stef
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_stef_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_stef"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.stef_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.stef_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.stef_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.stef_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.stef_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_stef"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_stef"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.fiek
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/fiek
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_fiek_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_fiek"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.fiek_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.fiek_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.fiek_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.fiek_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.fiek_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_fiek"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_fiek"].state; 
                        ]]]
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                secondary: eten
                icon: mdi:food-fork-drink
                entity: scene.etenstijd
                layout: vertical
                icon_color: |-
                  {% if states("input_select.current_active_scene") == "eten" %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: perform-action
                  perform_action: scene.turn_on
                  target:
                    entity_id: scene.etenstijd
              - type: custom:mushroom-template-card
                primary: ''
                secondary: avond
                icon: mdi:gamepad-variant-outline
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "avond"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.set_avond_licht
                  data:
                    skip_condition: true
                entity: automation.set_avond_licht
              - type: custom:mushroom-light-card
                entity: light.group_stef_kamer
                secondary_info: name
                show_brightness_control: false
                show_color_temp_control: false
                use_light_color: true
                collapsible_controls: false
                layout: vertical
                primary_info: none
                icon_type: icon
                double_tap_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  data:
                    skip_condition: true
                  target:
                    entity_id: automation.koffie_tijd
                hold_action:
                  action: none
                icon: mdi:coffee
                icon_color: deep-orange
                name: koffie!
                show_color_control: false
              - type: custom:mushroom-template-card
                primary: ''
                secondary: schemer
                icon: mdi:weather-night
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "schemer"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.set_schemer_light
                  data:
                    skip_condition: true
                entity: automation.set_schemer_light
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ochtend
                icon: mdi:weather-sunset-up
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "ochtend"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  data: {}
                  target:
                    entity_id: scene.ochtendlicht
                entity: scene.ochtendlicht
              - type: custom:mushroom-template-card
                primary: ''
                secondary: slapen
                icon: >-
                  {% if states("input_select.current_active_scene") == "slapen"
                  %}
                    mdi:sleep
                  {%else%}
                    mdi:sleep-off
                  {%endif%}
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "slapen"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  target:
                    entity_id: automation.sleep_time_activated
                  perform_action: automation.trigger
                  data:
                    skip_condition: true
                entity: automation.sleep_time_activated
                fill_container: false
      - type: conditional
        conditions:
          - condition: state
            entity: sensor.thuis_fiek_direction_of_travel
            state: towards
        card:
          type: custom:mushroom-template-card
          primary: >-
            Fiek's verwachte aankomst tijd: {{
            states['sensor.estimated_time_of_arrival_fiek'].state}}
          secondary: >-
            {% set travel_sensor = 'sensor.travel_time_fiek_to_home' %} {% set
            duration = state_attr(travel_sensor, 'duration') | round() %} {% set
            route = state_attr(travel_sensor, 'route') %}  Via: {{ route |
            default('Unknown  Route') | replace("Best-", "") }}  {{'\n'}}Totale
            reisstijd: {{ duration | default(0) if duration is not none else 0
            }} min      {{'\n'}}Updated {{states[travel_sensor].last_changed |
            relative_time }} ago. 
          icon: mdi:waze
          entity: sensor.travel_time_fiek_to_home
          fill_container: false
          multiline_secondary: true
          layout: vertical
          icon_color: light-blue
      - type: custom:collapsable-cards
        card_mod:
          style: |
            ha-card {
              border: 1px #000000 solid;
              margin: 0 1% 0 1%;
              width: 98%
            }
            .type-custom-collapsable-cards{
              background: bottom right no-repeat url("/local/images/peugeot_banner.jpg");
              background-size: cover;
            }
        title: ' '
        cards:
          - type: custom:auto-entities
            filter:
              include:
                - entity_id: null
              exclude:
                - state: unknown
            sort:
              method: state
              numeric: true
              ip: false
              ignore_case: false
              reverse: false
            card:
              type: entities
              state_color: false
              show_header_toggle: false
              card_mod:
                style: |
                  ha-card {
                    background: rgba(0,0,0, 0.7);
                  }
            show_empty: false
          - type: entities
            card_mod:
              style: |
                ha-card {
                  background: rgba(0,0,0, 0.7);
                }
            entities:
              - entity: sensor.peugeot_3008_expdate
                name: APK verval datum
                secondary_info: none
              - entity: binary_sensor.peugeot_3008_insured
                name: Verzekering actief
              - entity: sensor.peugeot_3008_recall
                name: Is er een terug roep actie?
            state_color: true
            title: Peugeot 3008
      - show_current: true
        show_forecast: true
        type: weather-forecast
        entity: weather.forecast_home
        name: Delft
        forecast_type: daily
        secondary_info_attribute: wind_speed
  - title: lights
    path: lights
    icon: mdi:lightbulb-group
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: markdown
              content: |
                ## <center> Hello, {{user}} </center>
              style:
                text-align: center
          - type: custom:decluttering-card
            template: navigation_header
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                secondary: eten
                icon: mdi:food-fork-drink
                entity: scene.etenstijd
                layout: vertical
                icon_color: |-
                  {% if states("input_select.current_active_scene") == "eten" %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: perform-action
                  perform_action: scene.turn_on
                  target:
                    entity_id: scene.etenstijd
              - type: custom:mushroom-template-card
                primary: ''
                secondary: avond
                icon: mdi:gamepad-variant-outline
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "avond"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.set_avond_licht
                  data:
                    skip_condition: true
                entity: automation.set_avond_licht
              - type: custom:mushroom-light-card
                entity: light.group_stef_kamer
                secondary_info: name
                show_brightness_control: false
                show_color_temp_control: false
                use_light_color: true
                collapsible_controls: false
                layout: vertical
                primary_info: none
                icon_type: icon
                double_tap_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  data:
                    skip_condition: true
                  target:
                    entity_id: automation.koffie_tijd
                hold_action:
                  action: none
                icon: mdi:coffee
                icon_color: deep-orange
                name: koffie!
                show_color_control: false
              - type: custom:mushroom-template-card
                primary: ''
                secondary: schemer
                icon: mdi:weather-night
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "schemer"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.set_schemer_light
                  data:
                    skip_condition: true
                entity: automation.set_schemer_light
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ochtend
                icon: mdi:weather-sunset-up
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "ochtend"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  data: {}
                  target:
                    entity_id: scene.ochtendlicht
                entity: scene.ochtendlicht
              - type: custom:mushroom-template-card
                primary: ''
                secondary: slapen
                icon: >-
                  {% if states("input_select.current_active_scene") == "slapen"
                  %}
                    mdi:sleep
                  {%else%}
                    mdi:sleep-off
                  {%endif%}
                layout: vertical
                icon_color: >-
                  {% if states("input_select.current_active_scene") == "slapen"
                  %}
                    amber
                  {%else%}
                    disabled
                  {%endif%}
                multiline_secondary: true
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  target:
                    entity_id: automation.sleep_time_activated
                  perform_action: automation.trigger
                  data:
                    skip_condition: true
                entity: automation.sleep_time_activated
                fill_container: false
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    icon_color: disabled
                    layout: vertical
                    secondary_info: none
                    name: Alles uit
                    tap_action:
                      action: call-service
                      service: light.turn_off
                      data: {}
                      target:
                        entity_id: light.group_all
                    icon: mdi:lightbulb-group-off-outline
                    fill_container: false
                    entity: light.group_all
                  - type: custom:mushroom-entity-card
                    icon_color: disabled
                    layout: vertical
                    secondary_info: none
                    name: Alles aan
                    tap_action:
                      action: call-service
                      service: light.turn_on
                      data:
                        transition: 2
                        brightness_pct: 100
                      target:
                        entity_id: light.group_all
                    icon: ''
                    fill_container: false
                    entity: light.group_all
              - type: custom:mushroom-light-card
                entity: light.group_all
                name: Alle lampen in huis
                secondary_info: none
                show_brightness_control: true
                show_color_temp_control: true
                use_light_color: true
                collapsible_controls: false
                layout: horizontal
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Voor ({{ states[entity].state }} lx)
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 10 %}
                    mdi:brightness-1
                  {% elif brightness < 30 %}
                    mdi:brightness-2
                  {% elif brightness < 40 %}
                    mdi:brightness-3
                  {% elif brightness < 50 %}
                    mdi:brightness-4
                  {% elif brightness < 70 %}
                    mdi:brightness-5
                  {% elif brightness < 80 %}
                    mdi:brightness-6
                  {% elif brightness < 1001 %}
                    mdi:brightness-7
                  {% else %}
                    mdi:alert-circle
                  {% endif %}
                icon_color: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 20 %}
                    grey
                  {% elif brightness < 40 %}
                    blue
                  {% elif brightness < 60 %}
                    orange
                  {% elif brightness < 1000 %}
                    yellow
                  {% else %}
                    red
                  {% endif %}
                entity: sensor.woonkamer_motion_aqara_voor_illuminance_lux
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Achter ({{ states[entity].state }} lx)
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 10 %}
                    mdi:brightness-1
                  {% elif brightness < 30 %}
                    mdi:brightness-2
                  {% elif brightness < 40 %}
                    mdi:brightness-3
                  {% elif brightness < 50 %}
                    mdi:brightness-4
                  {% elif brightness < 70 %}
                    mdi:brightness-5
                  {% elif brightness < 80 %}
                    mdi:brightness-6
                  {% elif brightness < 1001 %}
                    mdi:brightness-7
                  {% else %}
                    mdi:alert-circle
                  {% endif %}
                icon_color: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 20 %}
                    grey
                  {% elif brightness < 40 %}
                    blue
                  {% elif brightness < 60 %}
                    orange
                  {% elif brightness < 1000 %}
                    yellow
                  {% else %}
                    red
                  {% endif %}
                entity: sensor.woonkamer_motion_aqara_achter_illuminance_lux
                tap_action:
                  action: more-info
                fill_container: false
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: markdown
              content: |
                ## <center> Woonkamer </center>
              style:
                text-align: center
          - type: custom:mushroom-light-card
            name: Alle lampen woonkamer
            secondary_info: none
            show_brightness_control: false
            show_color_temp_control: true
            use_light_color: true
            collapsible_controls: true
            layout: horizontal
            entity: light.lampen_woonkamer
            fill_container: false
          - type: custom:slider-button-card
            entity: light.woonkamer_lamp_staande
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
          - type: custom:slider-button-card
            entity: light.woonkamer_lamp_achter
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
            name: Plafon achter
          - type: custom:slider-button-card
            entity: light.lamp_woonkamer_plafon_voor
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
            name: Plafon voor
          - type: horizontal-stack
            cards:
              - type: custom:slider-button-card
                entity: light.woonkamer_lamp_fiek_bureau
                slider:
                  direction: left-right
                  background: gradient
                  use_state_color: true
                  use_percentage_bg_opacity: true
                  show_track: true
                  toggle_on_click: false
                  force_square: false
                show_name: true
                show_state: true
                compact: true
                icon:
                  show: true
                  use_state_color: true
                  tap_action:
                    action: more-info
                  icon: ''
                action_button:
                  mode: custom
                  icon: mdi:power
                  show: true
                  show_spinner: true
                  tap_action:
                    action: toggle
                name: 'Bureau '
              - type: custom:mushroom-entity-card
                entity: script.color_loop_testlamp
                name: loop
                tap_action:
                  action: toggle
                secondary_info: state
                icon: ''
          - type: horizontal-stack
            cards:
              - type: custom:slider-button-card
                entity: light.woonkamer_lamp_test
                slider:
                  direction: left-right
                  background: gradient
                  use_state_color: true
                  use_percentage_bg_opacity: true
                  show_track: true
                  toggle_on_click: false
                  force_square: false
                show_name: true
                show_state: true
                compact: true
                icon:
                  show: true
                  use_state_color: true
                  tap_action:
                    action: more-info
                  icon: ''
                action_button:
                  mode: custom
                  icon: mdi:power
                  show: true
                  show_spinner: true
                  tap_action:
                    action: toggle
                name: Test lamp
              - type: custom:gap-card
          - type: custom:mushroom-light-card
            name: Bureau
            secondary_info: none
            show_brightness_control: false
            show_color_temp_control: false
            use_light_color: true
            collapsible_controls: true
            layout: horizontal
            entity: light.woonkamer_lamp_fiek_bureau
            fill_container: false
            show_color_control: true
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Voor
                secondary: '{{ states[entity].last_changed | relative_time }} ago'
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: '{{ ''orange'' if is_state(entity, ''on'') else '''' }}'
                tap_action:
                  action: more-info
                fill_container: false
                entity: binary_sensor.woonkamer_motion_aqara_voor_occupancy
              - type: custom:mushroom-template-card
                primary: Achter
                secondary: '{{ states[entity].last_changed | relative_time }} ago'
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: '{{ ''orange'' if is_state(entity, ''on'') else '''' }}'
                entity: binary_sensor.woonkamer_motion_aqara_achter_occupancy
                tap_action:
                  action: more-info
                fill_container: false
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Tussen Deur
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: mdi:door{{ '-open' if is_state(entity, 'on') else '-closed' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') }}
                entity: binary_sensor.woonkamer_door_sensor_tussendeur_contact
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: IKEA
                secondary: '{{ states[entity].last_changed | relative_time }} ago'
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: '{{ ''orange'' if is_state(entity, ''on'') else '''' }}'
                entity: binary_sensor.ikea_motion_sensor_occupancy
                tap_action:
                  action: more-info
                fill_container: false
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: markdown
              content: |
                ## <center> Stef's kamer </center>
              style:
                text-align: center
          - type: custom:mushroom-light-card
            name: Alle Stef kamer
            secondary_info: none
            show_brightness_control: false
            show_color_temp_control: false
            use_light_color: true
            collapsible_controls: true
            layout: horizontal
            entity: light.group_stef_kamer
            fill_container: false
            show_color_control: true
          - type: custom:slider-button-card
            entity: light.3a_smart_home_de_lxt56_ls27lx1_7_light
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
          - type: custom:slider-button-card
            entity: light.lamp_plafon_stef_light
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
            name: plafonlamp Stef
          - type: conditional
            conditions:
              - entity: light.wled
                state: 'on'
            card:
              type: iframe
              url: https://wled.buurmans.info/liveview
              aspect_ratio: 5%
              title: null
          - type: custom:slider-button-card
            entity: light.wled
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Stef
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') else '' }}
                entity: binary_sensor.aqara_motion_sensor_stef_beweging
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Stef
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') else '' }}
                entity: binary_sensor.aqara_motion_sensor_stef_2_beweging
                tap_action:
                  action: more-info
                fill_container: false
          - type: horizontal-stack
            cards:
              - type: custom:gap-card
              - type: custom:mushroom-template-card
                primary: Deur
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: mdi:door{{ '-open' if is_state(entity, 'on') else '-closed' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') }}
                entity: binary_sensor.stefkamer_door_sensor_contact
                tap_action:
                  action: more-info
                fill_container: false
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Stef ({{ states[entity].state }} lx)
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 10 %}
                    mdi:brightness-1
                  {% elif brightness < 30 %}
                    mdi:brightness-2
                  {% elif brightness < 40 %}
                    mdi:brightness-3
                  {% elif brightness < 50 %}
                    mdi:brightness-4
                  {% elif brightness < 70 %}
                    mdi:brightness-5
                  {% elif brightness < 80 %}
                    mdi:brightness-6
                  {% elif brightness < 1001 %}
                    mdi:brightness-7
                  {% else %}
                    mdi:alert-circle
                  {% endif %}
                icon_color: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 20 %}
                    grey
                  {% elif brightness < 40 %}
                    blue
                  {% elif brightness < 60 %}
                    orange
                  {% elif brightness < 1000 %}
                    yellow
                  {% else %}
                    red
                  {% endif %}
                entity: sensor.aqara_motion_sensor_stef_licht
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Stef ({{ states[entity].state }} lx)
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 10 %}
                    mdi:brightness-1
                  {% elif brightness < 30 %}
                    mdi:brightness-2
                  {% elif brightness < 40 %}
                    mdi:brightness-3
                  {% elif brightness < 50 %}
                    mdi:brightness-4
                  {% elif brightness < 70 %}
                    mdi:brightness-5
                  {% elif brightness < 80 %}
                    mdi:brightness-6
                  {% elif brightness < 1001 %}
                    mdi:brightness-7
                  {% else %}
                    mdi:alert-circle
                  {% endif %}
                icon_color: |
                  {% set brightness = states[entity].state | int %}
                  {% if brightness < 20 %}
                    grey
                  {% elif brightness < 40 %}
                    blue
                  {% elif brightness < 60 %}
                    orange
                  {% elif brightness < 1000 %}
                    yellow
                  {% else %}
                    red
                  {% endif %}
                entity: sensor.aqara_motion_sensor_stef_2_licht
                tap_action:
                  action: more-info
                fill_container: false
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Roep Stef
                secondary: >-
                  {{ state_attr("automation.koffie_tijd","last_triggered") |
                  relative_time}} ago
                icon: mdi:arrow-top-right
                icon_color: >-
                  {% set last_triggered =
                  as_timestamp(state_attr("automation.koffie_tijd","last_triggered"))
                  %}  {% set current_time = as_timestamp(now()) %}  {% set
                  time_difference = (current_time - last_triggered) / 60 %}  {%
                  if time_difference < 5 %}
                    green
                  {% elif time_difference < 10 %}
                    orange
                  {% else %}
                    grey
                  {% endif %}
                entity: automation.koffie_tijd
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Reactie Stef
                secondary: >-
                  {{ state_attr("automation.koffietijdreactie","last_triggered")
                  | relative_time}} ago
                icon: mdi:arrow-bottom-left
                icon_color: |2-
                    {% set last_triggered = as_timestamp(state_attr("automation.koffietijdreactie","last_triggered")) %} 
                    {% set current_time = as_timestamp(now()) %} 
                    {% set time_difference = (current_time - last_triggered) / 60 %} 
                    {% if time_difference < 5 %}
                      green
                    {% elif time_difference < 10 %}
                      orange
                    {% else %}
                      grey
                    {% endif %}
                entity: automation.koffietijdreactie
                tap_action:
                  action: more-info
                fill_container: false
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: markdown
              content: |
                ## <center> Keuken </center>
              style:
                text-align: center
          - type: custom:slider-button-card
            entity: light.keuken_lamp_ledstrip
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
            name: Keuken
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Iemand in de Keuken?
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'False') else
                  '' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'True') else '' }}
                entity: sensor.is_anyone_in_kitchen
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Achter Deur
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: mdi:door{{ '-open' if is_state(entity, 'on') else '-closed' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') }}
                entity: binary_sensor.keuken_door_sensor_achterdeur_contact
                tap_action:
                  action: more-info
                fill_container: false
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Keuken
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') else '' }}
                entity: binary_sensor.keuken_motion_sensor_occupancy
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Wasbak
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: mdi:vibrate{{ '-off' if is_state(entity, 'off') else '' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') else '' }}
                entity: binary_sensor.keuken_vibration_sensor_wasbak_vibration
                tap_action:
                  action: more-info
                fill_container: false
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: custom:gap-card
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 1280px)'
            card:
              type: markdown
              content: |
                ## <center> Gang </center>
              style:
                text-align: center
          - type: custom:slider-button-card
            entity: light.gang_lamp
            slider:
              direction: left-right
              background: gradient
              use_state_color: true
              use_percentage_bg_opacity: true
              show_track: true
              toggle_on_click: false
              force_square: false
            show_name: true
            show_state: true
            compact: true
            icon:
              show: true
              use_state_color: true
              tap_action:
                action: more-info
              icon: ''
            action_button:
              mode: custom
              icon: mdi:power
              show: true
              show_spinner: true
              tap_action:
                action: toggle
            name: 'Gang '
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Gang
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: >-
                  mdi:motion-sensor{{ '-off' if is_state(entity, 'off') else ''
                  }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') else '' }}
                entity: binary_sensor.gang_motion_sensor_occupancy
                tap_action:
                  action: more-info
                fill_container: false
              - type: custom:mushroom-template-card
                primary: Voor Deur
                secondary: |
                  {{ states[entity].last_changed | relative_time }} ago
                icon: mdi:door{{ '-open' if is_state(entity, 'on') else '-closed' }}
                icon_color: |
                  {{ 'orange' if is_state(entity, 'on') }}
                entity: binary_sensor.gang_door_sensor_voordeur_contact
                tap_action:
                  action: more-info
                fill_container: false
      - type: custom:horizon-card
        language: nl
        fields:
          dusk: false
          noon: true
          dawn: false
        southern_flip: false
  - title: persons
    path: persons
    icon: mdi:account-group
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.chantal
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/chantal
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_chantal_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_chantal"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.chantal_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.chantal_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.chantal_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.chantal_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.chantal_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_chantal"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_chantal"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.stef
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/stef
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_stef_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_stef"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.stef_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.stef_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.stef_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.stef_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.stef_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_stef"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_stef"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.fiek
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/fiek
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_fiek_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_fiek"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.fiek_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.fiek_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.fiek_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.fiek_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.fiek_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_fiek"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_fiek"].state; 
                        ]]]
      - type: map
        default_zoom: 12
        auto_fit: true
        entities:
          - entity: person.fiek
          - entity: person.chantal
          - entity: person.stef
        aspect_ratio: '1:1.5'
        theme_mode: dark
        hours_to_show: 12
  - title: mediaplayers
    path: mediaplayers
    icon: mdi:music
    theme: buurmans-bubble-theme
    badges: []
    cards:
      - type: custom:decluttering-card
        template: navigation_header
      - type: vertical-stack
        cards:
          - type: custom:sonos-card
            sections:
              - player
              - media browser
            showNonSonosPlayers: false
            topFavorites:
              - ''
            dynamicVolumeSlider: true
            hideGroupCurrentTrack: true
            hideBrowseMediaButton: true
            mediaBrowserHideTitleForThumbnailIcons: true
            showVolumeUpAndDownButtons: true
            heightPercentage: 100
            entities: []
            artworkAsBackground: true
          - type: custom:mushroom-media-player-card
            entity: media_player.kpn_tv
            fill_container: true
            show_volume_level: true
            use_media_info: true
            media_controls:
              - on_off
            volume_controls:
              - volume_buttons
              - volume_set
              - volume_mute
            collapsible_controls: true
            tap_action:
              action: more-info
            secondary_info: last-changed
          - type: custom:mushroom-media-player-card
            entity: media_player.chromecast
            fill_container: true
            show_volume_level: true
            use_media_info: true
            media_controls:
              - on_off
            volume_controls:
              - volume_buttons
              - volume_set
              - volume_mute
            collapsible_controls: true
            tap_action:
              action: toggle
            secondary_info: last-changed
          - type: custom:mushroom-media-player-card
            entity: media_player.google_nest
            fill_container: true
            show_volume_level: true
            use_media_info: true
            media_controls:
              - on_off
            volume_controls:
              - volume_buttons
              - volume_set
              - volume_mute
            collapsible_controls: true
            tap_action:
              action: toggle
            secondary_info: last-changed
      - type: media-control
        entity: media_player.google_nest
        theme: buurmans-bubble-theme
  - title: verwarming
    path: verwarming
    icon: mdi:radiator
    theme: buurmans-bubble-theme
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: thermostat
            entity: climate.thermostat
            name: Toon
            show_current_as_primary: true
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                secondary: '-0.5°c'
                icon: mdi:minus
                entity: climate.thermostat
                tap_action:
                  action: call-service
                  service: script.temperature_temperature_steps
                  data:
                    climate_id: climate.thermostat
                    value: -0.5
                badge_icon: ''
                layout: vertical
                multiline_secondary: true
                icon_color: ''
              - type: custom:mushroom-template-card
                primary: ''
                secondary: 15°c
                icon: mdi:sleep
                tap_action:
                  action: call-service
                  service: climate.set_temperature
                  data:
                    temperature: 15
                  target:
                    entity_id: climate.thermostat
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                entity: climate.thermostat
                multiline_secondary: true
                fill_container: true
                layout: vertical
                icon_color: >-
                  {% set temperature = (state_attr('climate.thermostat',
                  'temperature') | float | default(15)) %}

                  {% if temperature == 15 %}
                    orange
                  {% endif %}
              - type: custom:mushroom-template-card
                primary: ''
                secondary: 19.5°c
                icon: mdi:home
                tap_action:
                  action: call-service
                  service: climate.set_temperature
                  data:
                    temperature: 19.5
                  target:
                    entity_id: climate.thermostat
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                multiline_secondary: true
                layout: vertical
                icon_color: >-
                  {% set temperature = (state_attr('climate.thermostat',
                  'temperature') | float | default(15)) %}

                  {% if temperature == 19.5 %}
                    orange
                  {% endif %}
              - type: custom:mushroom-template-card
                primary: ''
                secondary: 20°c
                icon: mdi:sofa
                layout: vertical
                tap_action:
                  action: call-service
                  service: climate.set_temperature
                  data:
                    temperature: 20
                  target:
                    entity_id: climate.thermostat
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: >-
                  {% set temperature = (state_attr('climate.thermostat',
                  'temperature') | float | default(15)) %}

                  {% if temperature == 20 %}
                    orange
                  {% endif %}
              - type: custom:mushroom-template-card
                primary: ''
                secondary: +0.5°c
                icon: mdi:plus
                entity: climate.thermostat
                tap_action:
                  action: call-service
                  service: script.temperature_temperature_steps
                  data:
                    climate_id: climate.thermostat
                    value: 0.5
                badge_icon: ''
                fill_container: false
                layout: vertical
                icon_color: ''
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            entities:
              - sensor.inside_temperature
            name: Toon afgelopen 24 uur
            hours_to_show: 24
            points_per_hour: 1
            show:
              labels: false
              fill: true
            color_thresholds:
              - value: 0
                color: '#0000FF'
              - value: 17
                color: '#00FFFF'
              - value: 17.5
                color: '#00FF00'
              - value: 18.5
                color: '#FFFF00'
              - value: 19
                color: '#FFA500'
              - value: 19.5
                color: '#FF4500'
              - value: 20
                color: '#FF0000'
          - type: custom:mini-graph-card
            entities:
              - sensor.woonkamer_thermometer_eettafel_temperature
            name: Muur afgelopen 24 uur
            hours_to_show: 24
            points_per_hour: 1
            show:
              labels: false
              fill: true
            color_thresholds:
              - value: 0
                color: '#0000FF'
              - value: 17
                color: '#00FFFF'
              - value: 17.5
                color: '#00FF00'
              - value: 18.5
                color: '#FFFF00'
              - value: 19
                color: '#FFA500'
              - value: 19.5
                color: '#FF4500'
              - value: 20
                color: '#FF0000'
          - type: history-graph
            entities:
              - entity: binary_sensor.hot_tap_water
            hours_to_show: 12
            show_names: false
            title: warm water kraan
            logarithmic_scale: true
          - graph: none
            type: sensor
            entity: sensor.climate_temperature
            detail: 1
            theme: buurmans-bubble-theme
            hours_to_show: 24
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: sensor.woonkamer_thermometer_eettafel_humidity
                type: custom:multiple-entity-row
                name: Woonkamer
                icon: mdi:sofa
                secondary_info: last-changed
                entities:
                  - entity: sensor.woonkamer_thermometer_eettafel_temperature
                    name: false
                    icon: true
                  - entity: sensor.woonkamer_thermometer_eettafel_temperature
                    name: false
                  - entity: sensor.woonkamer_thermometer_eettafel_humidity
                    name: false
                    icon: true
              - entity: sensor.stefkamer_thermometer_humidity
                type: custom:multiple-entity-row
                name: Stef kamer
                icon: mdi:controller-classic
                secondary_info: last-changed
                entities:
                  - entity: sensor.stefkamer_thermometer_temperature
                    name: false
                    icon: true
                  - entity: sensor.stefkamer_thermometer_temperature
                    name: false
                  - entity: sensor.stefkamer_thermometer_humidity
                    name: false
                    icon: true
              - entity: sensor.slaapkamer_thermometer_humidity
                type: custom:multiple-entity-row
                name: Slaapkamer
                icon: mdi:bed
                secondary_info: last-changed
                entities:
                  - entity: sensor.slaapkamer_thermometer_temperature
                    name: false
                    icon: true
                  - entity: sensor.slaapkamer_thermometer_temperature
                    name: false
                  - entity: sensor.slaapkamer_thermometer_humidity
                    name: false
                    icon: true
              - entity: sensor.tuin_thermometer_schuur_humidity
                type: custom:multiple-entity-row
                name: Schuur
                icon: mdi:greenhouse
                secondary_info: last-changed
                entities:
                  - entity: sensor.tuin_thermometer_schuur_temperature
                    name: false
                    icon: true
                  - entity: sensor.tuin_thermometer_schuur_temperature
                    name: false
                  - entity: sensor.tuin_thermometer_schuur_humidity
                    name: false
                    icon: true
            show_header_toggle: false
            state_color: true
          - type: entities
            entities:
              - entity: sensor.outside_temperature
                type: custom:multiple-entity-row
                name: Buiten
                icon: mdi:shovel
                secondary_info: last-changed
                entities:
                  - entity: sensor.outside_temperature
                    name: false
                    icon: true
              - entity: sensor.inside_temperature
                type: custom:multiple-entity-row
                name: Binnen
                icon: mdi:thermostat
                secondary_info: last-changed
                entities:
                  - entity: sensor.inside_temperature
                    name: false
                    icon: true
              - entity: sensor.climate_temperature
                type: custom:multiple-entity-row
                name: Verwarming
                icon: mdi:radiator
                secondary_info: last-changed
                entities:
                  - entity: sensor.climate_temperature
                    name: false
                    icon: true
            show_header_toggle: false
            state_color: true
          - show_current: true
            show_forecast: true
            type: weather-forecast
            entity: weather.forecast_home
            name: Delft
            forecast_type: daily
            secondary_info_attribute: wind_speed
          - type: custom:neerslag-card
            title: Neerslag
            entities:
              - sensor.neerslag_buienalarm_regen_data
              - sensor.neerslag_buienradar_regen_data
  - title: afval
    path: afval
    icon: mdi:recycle-variant
    theme: buurmans-bubble-theme
    badges: []
    cards:
      - type: custom:decluttering-card
        template: navigation_header
      - type: custom:auto-entities
        card:
          type: entities
          show_state: true
          show_name: true
          title: Afval ophaal kalender
          show_icon: false
          state_color: false
        filter:
          include:
            - entity_id: sensor.afvalinfo_*
          exclude:
            - state: unknown
            - entity_id: sensor.afvalinfo_first_upcomming_trash_type
        sort:
          method: attribute
          attribute: days_until_collection_date
          numeric: true
  - title: internet
    path: internet
    icon: mdi:web
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: vertical-stack
            cards:
              - type: custom:uptime-card
                entity: binary_sensor.kpn_modem_ping_uptime
                hours_to_show: 48
                title_adaptive_color: true
                status_adaptive_color: true
                icon: mdi:web
                ko_icon: mdi:web-cancel
                update_interval: 30
                severity: 10
                icon_adaptive_color: true
                tooltip_adaptive_color: true
                alias:
                  ok: Connected
                  ko: Disconnected
                alignment:
                  icon_first: false
                  tooltip_first: false
                tooltip:
                  hour24: true
                bar:
                  height: 20
                  round: 4
              - type: custom:uptime-card
                entity: binary_sensor.internet_ping_uptime
                hours_to_show: 48
                title_adaptive_color: true
                status_adaptive_color: true
                icon: mdi:web
                ko_icon: mdi:web-cancel
                update_interval: 30
                severity: 10
                icon_adaptive_color: true
                tooltip_adaptive_color: true
                alias:
                  ok: Connected
                  ko: Disconnected
                alignment:
                  icon_first: false
                  tooltip_first: false
                tooltip:
                  hour24: true
                bar:
                  height: 20
                  round: 4
                title_template: Google ping
              - type: custom:uptime-card
                entity: binary_sensor.pi_hole_main_ping_uptime
                hours_to_show: 48
                title_adaptive_color: true
                status_adaptive_color: true
                icon: mdi:web
                ko_icon: mdi:web-cancel
                update_interval: 30
                severity: 10
                icon_adaptive_color: true
                tooltip_adaptive_color: true
                alias:
                  ok: Connected
                  ko: Disconnected
                alignment:
                  icon_first: false
                  tooltip_first: false
                tooltip:
                  hour24: true
                bar:
                  height: 20
                  round: 4
                title_template: Pi-hole Main
              - type: custom:uptime-card
                entity: binary_sensor.pi_hole_fallback_ping_uptime
                hours_to_show: 48
                title_adaptive_color: true
                status_adaptive_color: true
                icon: mdi:web
                ko_icon: mdi:web-cancel
                update_interval: 30
                severity: 10
                icon_adaptive_color: true
                tooltip_adaptive_color: true
                alias:
                  ok: Connected
                  ko: Disconnected
                alignment:
                  icon_first: false
                  tooltip_first: false
                tooltip:
                  hour24: true
                bar:
                  height: 20
                  round: 4
                clip: {}
                tap_action: {}
                blink: {}
                title_template: Pi-hole Fallback
              - type: custom:uptime-card
                entity: binary_sensor.cloudflare_tunnels_ping_uptime
                hours_to_show: 48
                title_adaptive_color: true
                status_adaptive_color: true
                icon: mdi:web
                ko_icon: mdi:web-cancel
                update_interval: 30
                severity: 10
                icon_adaptive_color: true
                tooltip_adaptive_color: true
                alias:
                  ok: Connected
                  ko: Disconnected
                alignment:
                  icon_first: false
                  tooltip_first: false
                tooltip:
                  hour24: true
                bar:
                  height: 20
                  round: 4
                title_template: 'Cloudflare Tunnels '
      - type: vertical-stack
        cards:
          - chart_type: line
            period: day
            days_to_show: 14
            type: statistics-graph
            title: Speedtest
            entities:
              - sensor.speedtest_download
              - sensor.speedtest_upload
            stat_types:
              - max
          - type: entities
            entities:
              - entity: sensor.speedtest_download
                name: Last Download
                secondary_info: last-updated
              - entity: sensor.average_speedtest_download
                name: Average Download
                secondary_info: none
              - entity: sensor.speedtest_upload
                name: Last Upload
              - entity: sensor.average_speedtest_upload
                name: Average Upload
              - entity: sensor.speedtest_ping
                name: Ping
              - entity: sensor.average_speedtest_ping
                name: Average ping
                secondary_info: none
            title: SpeedTest
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.speedtest_download
                tap_action:
                  action: call-service
                  service: homeassistant.update_entity
                  data: {}
                  target:
                    entity_id: sensor.speedtest_download
                primary_info: name
                secondary_info: last-updated
                icon_type: icon
                layout: vertical
                fill_container: false
                name: Down
              - type: custom:mushroom-entity-card
                entity: sensor.speedtest_upload
                tap_action:
                  action: call-service
                  service: homeassistant.update_entity
                  data: {}
                  target:
                    entity_id: sensor.speedtest_upload
                primary_info: name
                secondary_info: last-updated
                icon_type: icon
                layout: vertical
                fill_container: false
                name: Up
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: sensor.piholes_total_queries_today
                secondary_info: last-changed
              - entity: sensor.piholes_blocked_today
              - entity: sensor.piholes_blocked_percentage
              - entity: sensor.piholes_domains_blocked
                secondary_info: none
              - entity: switch.pi_hole_main
                secondary_info: none
              - entity: switch.pi_hole_fallback
                secondary_info: none
            title: Pi-holes
            show_header_toggle: false
            state_color: true
          - type: horizontal-stack
            cards:
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: url
                  url_path: http://192.168.2.210/admin/index.php
                entity: binary_sensor.pi_hole_main_status
                show_state: false
                name: Main
                icon_height: 50px
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: url
                  url_path: http://192.168.2.211/admin/index.php
                entity: binary_sensor.pi_hole_fallback_status
                show_state: false
                name: Fallback
                icon_height: 50px
          - type: custom:mushroom-template-card
            primary: Pi-Holes
            secondary: Klik om 5 minuten uit te schakelen
            icon: mdi:pi-hole
            icon_color: >-
              {% if is_state('binary_sensor.pi_hole_main_status', 'on') and
              is_state('binary_sensor.pi_hole_fallback_status', 'on')%}
                red
              {% else %}
                disabled
              {% endif %}
            badge_icon: >-
              {% if is_state('binary_sensor.pi_hole_main_status', 'off') or
              is_state('binary_sensor.pi_hole_fallback_status', 'off')%}
                mdi:pause
              {% endif %}
            tap_action:
              action: call-service
              service: pi_hole.disable
              target:
                entity_id:
                  - switch.pi_hole_main
                  - switch.pi_hole_fallback
              data:
                duration: '00:05:00'
            fill_container: false
            entity: sensor.pi_hole_main_seen_clients
            badge_color: blue
      - type: history-graph
        entities:
          - entity: sensor.stef_phone_wifi_signal_strength
          - entity: sensor.chantal_phone_wifi_signal_strength
          - entity: sensor.fiek_phone_wifi_signal_strength
        title: wifi
        logarithmic_scale: false
        hours_to_show: 8
        min_y_axis: -100
        max_y_axis: 0
  - title: f1
    path: f1
    icon: mdi:racing-helmet
    theme: buurmans-bubble-theme
    type: sections
    max_columns: 3
    sections:
      - type: grid
        cards:
          - type: custom:gap-card
            visibility:
              - condition: screen
                media_query: '(min-width: 1024px)'
          - type: custom:decluttering-card
            template: navigation_header
          - type: custom:teamtracker-card
            entity: sensor.feyenoord_3
            show_league: false
            outline: false
            outline_color: blue
            card_title: ''
            debug: false
        column_span: 3
      - type: grid
        cards:
          - type: custom:formulaone-card
            card_type: countdown
            f1_font: true
            image_clickable: false
            location_clickable: false
            show_carnumber: false
            hide_racedatetimes: false
            show_raceinfo: true
        column_span: 1
      - type: grid
        cards:
          - type: custom:formulaone-card
            card_type: driver_standings
            f1_font: true
            show_carnumber: false
            show_raceinfo: false
            hide_tracklayout: false
            standings:
              show_team: true
              show_teamlogo: true
              show_flag: false
            title: Drivers
        column_span: 1
      - type: grid
        cards:
          - type: custom:formulaone-card
            card_type: constructor_standings
            f1_font: true
            show_carnumber: false
            show_raceinfo: false
            standings:
              show_team: false
              show_teamlogo: true
              show_flag: false
            title: Constructors
    cards: []
  - title: homelab
    path: homelab
    icon: mdi:server-outline
    theme: buurmans-bubble-theme
    layout:
      width: 300
      max_cols: 4
    type: custom:masonry-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
      - type: custom:collapsable-cards
        title_card:
          type: custom:uptime-card
          entity: binary_sensor.uptimekuma_proxmox_server
          hours_to_show: 48
          title_adaptive_color: true
          status_adaptive_color: true
          update_interval: 300
          severity: 2
          icon_adaptive_color: true
          tooltip_adaptive_color: true
          average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
          alias:
            ok: Online
            ko: Offline
          alignment:
            icon_first: false
            tooltip_first: true
          tooltip:
            hour24: true
          bar:
            height: 15
            round: 1
          show:
            icon: false
            title: true
        title: Uptimes
        cards:
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_pihole_main_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_pihole_fallback_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_cloudflare_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_uptime_kuma_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_photoprism_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_plex_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_sabnzb_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_handbrake_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_heimdall_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_passbolt_application
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
          - type: custom:uptime-card
            entity: binary_sensor.uptimekuma_filebrowser_container
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            update_interval: 300
            severity: 2
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            alias:
              ok: Online
              ko: Offline
            alignment:
              icon_first: false
              tooltip_first: true
            tooltip:
              hour24: true
            bar:
              height: 15
              round: 1
            show:
              icon: false
              title: true
      - type: custom:stack-in-card
        mode: vertical
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:bar-card
                columns: 1
                entity_row: false
                title: DS414+
                height: 35px
                width: 100%
                entities:
                  - entity: sensor.buurmansbignas_cpu_gebruik_totaal
                    name: CPU
                    icon: mdi:cpu-64-bit
                  - entity: sensor.buurmansbignas_geheugengebruik_fysiek
                    name: RAM
                    icon: mdi:brain
                  - entity: sensor.buurmansbignas_volume_1_volume_gebruikt
                    name: Disc
                    icon: mdi:harddisk
                severity:
                  - color: var(--success-color)
                    from: 0
                    to: 50
                  - color: var(--warning-color)
                    from: 51
                    to: 75
                  - color: var(--error-color)
                    from: 76
                    to: 100
                positions:
                  indicator: none
              - type: vertical-stack
                cards:
                  - show_state: false
                    show_name: false
                    camera_view: auto
                    type: picture-entity
                    image: /local/images/ds-414-s.jpg
                    entity: binary_sensor.uptimekuma_buurmansbignas
                    name: Uptime
                  - type: custom:mushroom-template-card
                    primary: '{{ states(''sensor.buurmansbignas_uptime_elapsed'') }}'
                    secondary: ''
                    icon: >-
                      {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                      'on') %}
                        mdi:play-circle
                      {% else %}
                        mdi:stop-circle
                      {% endif %}
                    fill_container: true
                    layout: horizontal
                    multiline_secondary: false
                    badge_icon: ''
                    tap_action:
                      action: more-info
                    entity: sensor.buurmansbignas_laatste_start
                    icon_color: >-
                      {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                      'on') %}
                        green
                      {% else %}
                        red
                      {% endif %}
          - type: custom:mushroom-template-card
            primary: >-
              Volume used {{
              states('sensor.buurmansbignas_volume_1_gebruikte_ruimte') |
              round(2) }} / {{
              states('sensor.buurmansbignas_volume_1_totale_grootte') | round(2)
              }} {{ state_attr('sensor.buurmansbignas_volume_1_totale_grootte',
              'unit_of_measurement') }}
            secondary: ''
            icon: mdi:chart-pie
            fill_container: true
            layout: horizontal
            multiline_secondary: false
            badge_icon: ''
            tap_action:
              action: more-info
            entity: sensor.buurmansbignas_volume_1_gebruikte_ruimte
            icon_color: >
              {% if states('sensor.buurmansbignas_volume_1_volume_gebruikt') |
              float < 50 %}
                green
              {% else %}
                red
              {% endif %}
          - type: custom:bar-card
            columns: 2
            entity_row: false
            height: 35px
            entities:
              - entity: sensor.buurmansbignas_drive_1_temperatuur
                name: Drive 1
                icon: mdi:thermometer
              - entity: sensor.buurmansbignas_drive_2_temperatuur
                name: Drive 2
                icon: mdi:thermometer
              - entity: sensor.buurmansbignas_drive_3_temperatuur
                name: Drive 3
                icon: mdi:thermometer
              - entity: sensor.buurmansbignas_drive_4_temperatuur
                name: Drive 4
                icon: mdi:thermometer
              - entity: sensor.buurmansbignas_temperatuur
                name: System
                icon: mdi:thermometer
            severity:
              - color: var(--success-color)
                from: 0
                to: 50
              - color: var(--warning-color)
                from: 51
                to: 75
              - color: var(--error-color)
                from: 76
                to: 100
            positions:
              indicator: none
      - type: custom:stack-in-card
        mode: vertical
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:bar-card
                columns: 1
                entity_row: false
                title: HP 800 G3
                decimal: 2
                entities:
                  - entity: sensor.node_proxmox_cpu_used
                    name: CPU
                    icon: mdi:cpu-64-bit
                  - entity: sensor.node_proxmox_memory_used_percentage
                    name: RAM
                    icon: mdi:brain
                  - entity: sensor.node_proxmox_disk_used_percentage
                    name: ZFS
                    icon: mdi:harddisk
                severity:
                  - color: var(--success-color)
                    from: 0
                    to: 50
                  - color: var(--warning-color)
                    from: 51
                    to: 75
                  - color: var(--error-color)
                    from: 76
                    to: 100
                positions:
                  indicator: inside
              - type: vertical-stack
                cards:
                  - show_state: false
                    show_name: false
                    camera_view: auto
                    type: picture-entity
                    image: /local/images/HP-EliteDesk-800-G3-SFF3.jpg
                    entity: sensor.node_proxmox_cpu_used
                    name: Load
                  - type: custom:mushroom-template-card
                    primary: '{{ states(''sensor.proxmox_server_uptime_elapsed'') }}'
                    secondary: ''
                    icon: >-
                      {% if is_state('binary_sensor.node_proxmox_status', 'on')
                      %}
                        mdi:play-circle
                      {% else %}
                        mdi:stop-circle
                      {% endif %}
                    fill_container: true
                    layout: horizontal
                    multiline_secondary: false
                    badge_icon: ''
                    tap_action:
                      action: more-info
                    entity: sensor.node_proxmox_last_boot
                    icon_color: >-
                      {% if is_state('binary_sensor.node_proxmox_status', 'on')
                      %}
                        green
                      {% else %}
                        red
                      {% endif %}
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: >-
                  Boot:  {{ states('sensor.node_proxmox_disk_used') | round(2)
                  }} /  
                        {{ states('sensor.node_proxmox_disk_total') | round(2)}} GB
                secondary: ''
                icon: mdi:chart-pie
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.node_proxmox_disk_used_percentage
                icon_color: ''
          - type: custom:bar-card
            columns: 2
            entity_row: false
            entities:
              - entity: sensor.proxmox_server_core_0_temperature
                name: Core 0
                icon: mdi:thermometer
              - entity: sensor.proxmox_server_core_1_temperature
                name: Core 1
                icon: mdi:thermometer
              - entity: sensor.proxmox_server_core_2_temperature
                name: Core 2
                icon: mdi:thermometer
              - entity: sensor.proxmox_server_core_3_temperature
                name: Core 3
                icon: mdi:thermometer
              - entity: sensor.proxmox_server_package_id_0_temperature
                name: Package
                icon: mdi:thermometer
              - entity: sensor.proxmox_server_composite_temperature
                name: System
                icon: mdi:server
            severity:
              - color: var(--success-color)
                from: 0
                to: 50
              - color: var(--warning-color)
                from: 51
                to: 75
              - color: var(--error-color)
                from: 76
                to: 100
            positions:
              indicator: none
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:bar-card
            columns: 1
            entity_row: false
            title: HA
            height: 35px
            width: 100%
            decimal: 2
            entities:
              - entity: sensor.qemu_home_assistant_main_250_cpu_used
                name: CPU
                icon: mdi:cpu-64-bit
              - entity: sensor.qemu_home_assistant_main_250_memory_used_percentage
                name: RAM
                icon: mdi:brain
              - entity: sensor.system_monitor_disk_use_percent
                name: Disc
                icon: mdi:harddisk
            severity:
              - color: var(--success-color)
                from: 0
                to: 50
              - color: var(--warning-color)
                from: 51
                to: 75
              - color: var(--error-color)
                from: 76
                to: 100
            positions:
              indicator: none
          - type: vertical-stack
            cards:
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                image: >-
                  https://www.vsx.pl/wp-content/uploads/2020/11/Home-Assistant-Logo-1-500x383@2x.png
                entity: sensor.qemu_home_assistant_main_250_last_boot
              - type: custom:mushroom-template-card
                primary: >-
                  {{ (as_timestamp(now()) -
                  as_timestamp(states('sensor.qemu_home_assistant_main_250_last_boot')))
                  | timestamp_custom('%-d days %H:%M:%S', false) }}
                secondary: ''
                icon: >-
                  {% if
                  is_state('binary_sensor.qemu_home_assistant_main_250_status',
                  'on') %}
                    mdi:play-circle
                  {% else %}
                    mdi:stop-circle
                  {% endif %}
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.qemu_home_assistant_main_250_last_boot
                icon_color: >-
                  {% if
                  is_state('binary_sensor.qemu_home_assistant_main_250_status',
                  'on') %}
                    green
                  {% else %}
                    red
                  {% endif %}
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:bar-card
            columns: 1
            entity_row: false
            title: Pi-hole main
            height: 35px
            width: 3
            decimal: 2
            entities:
              - entity: sensor.lxc_pihole_main_210_cpu_used
                name: CPU
                icon: mdi:cpu-64-bit
              - entity: sensor.lxc_pihole_main_210_memory_used_percentage
                name: RAM
                icon: mdi:brain
              - entity: sensor.lxc_pihole_main_210_disk_used_percentage
                name: Disc
                icon: mdi:harddisk
            positions:
              indicator: inside
          - type: vertical-stack
            cards:
              - type: picture-entity
                show_state: true
                show_name: true
                camera_view: auto
                entity: binary_sensor.lxc_pihole_main_210_status
                image: https://brands.home-assistant.io/_/pi_hole/icon.png
                name: pi-hole main
                card_mod: null
                style:
                  hui-image:
                    $: |
                      #image {
                        heigth: 10px;
                        top: 0px;
                        left: 0px;
                      }
              - type: custom:mushroom-template-card
                primary: >-
                  {{ states('sensor.lxc_pihole_main_210_last_boot') |
                  as_timestamp | timestamp_custom('%a %d %B %H:%M')}}
                secondary: ''
                icon: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    mdi:play-circle
                  {% else %}
                    mdi:stop-circle
                  {% endif %}
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.lxc_pihole_main_210_last_boot
                icon_color: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    green
                  {% else %}
                    red
                  {% endif %}
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bar-card
                columns: 1
                entity_row: false
                title: null
                height: 35px
                width: 3
                decimal: 2
                entities:
                  - entity: sensor.lxc_pihole_main_210_cpu_used
                    name: CPU
                    icon: mdi:cpu-64-bit
                  - entity: sensor.lxc_pihole_main_210_memory_used_percentage
                    name: RAM
                    icon: mdi:brain
                  - entity: sensor.lxc_pihole_main_210_disk_used_percentage
                    name: Disc
                    icon: mdi:harddisk
                positions:
                  indicator: inside
              - type: custom:mushroom-template-card
                primary: >-
                  {{ states('sensor.lxc_pihole_main_210_last_boot') |
                  as_timestamp | timestamp_custom('%a %d %B %H:%M')}}
                secondary: ''
                icon: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    mdi:play-circle
                  {% else %}
                    mdi:stop-circle
                  {% endif %}
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.lxc_pihole_main_210_last_boot
                icon_color: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    green
                  {% else %}
                    red
                  {% endif %}
          - type: picture-entity
            show_state: true
            show_name: true
            camera_view: auto
            entity: binary_sensor.lxc_pihole_main_210_status
            image: https://brands.home-assistant.io/_/pi_hole/icon.png
            name: pi-hole main
            card_mod: null
            style:
              hui-image:
                $: |
                  #image {
                    heigth: 10px;
                    top: 0px;
                    left: 0px;
                  }
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bar-card
                columns: 1
                entity_row: false
                title: null
                height: 35px
                width: 3
                decimal: 2
                entities:
                  - entity: sensor.lxc_pihole_fallback_211_cpu_used
                    name: CPU
                    icon: mdi:cpu-64-bit
                  - entity: sensor.lxc_pihole_fallback_211_memory_used_percentage
                    name: RAM
                    icon: mdi:brain
                  - entity: sensor.lxc_pihole_fallback_211_disk_used_percentage
                    name: Disc
                    icon: mdi:harddisk
                positions:
                  indicator: inside
              - type: custom:mushroom-template-card
                primary: >-
                  {{ states('sensor.lxc_pihole_fallback_211_last_boot') |
                  as_timestamp | timestamp_custom('%a %d %B %H:%M')}}
                secondary: ''
                icon: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    mdi:play-circle
                  {% else %}
                    mdi:stop-circle
                  {% endif %}
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.lxc_pihole_fallback_211_last_boot
                icon_color: >-
                  {% if is_state('binary_sensor.uptimekuma_buurmansbignas',
                  'on') %}
                    green
                  {% else %}
                    red
                  {% endif %}
          - type: picture-entity
            show_state: true
            show_name: true
            camera_view: auto
            entity: binary_sensor.lxc_pihole_fallback_211_status
            image: https://brands.home-assistant.io/_/pi_hole/icon.png
            name: pi-hole fallback
            card_mod: null
            style:
              hui-image:
                $: |
                  #image {
                    heigth: 10px;
                    top: 0px;
                    left: 0px;
                  }
  - title: battery
    path: battery
    icon: mdi:battery-charging
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - entity: sensor.low_battery_devices
                    state_not: unavailable
                card:
                  type: markdown
                  style: |
                    ha-card {
                      background-color: rgba(28, 28, 28, 0.8)
                    }
                  content: '{{states(''sensor.low_battery_devices'')}}'
                  title: Low Batteries
              - type: entities
                entities:
                  - entity: input_number.battery_threshold
                    name: 'Set Battery Threshold:'
                    style: |
                      ha-card {
                        background-color: rgba(28, 28, 28, 0.8)
                      }
                    secondary_info: last-changed
                title: Battery Threshold Config
                state_color: true
      - type: custom:auto-entities
        card:
          show_header_toggle: false
          title: Batterij overzicht
          type: entities
          state_color: true
        filter:
          include:
            - attributes:
                device_class: battery
              state: <= 100
          exclude:
            - name: /[Ll]ow/
            - name: /[Ss]tate/
        sort:
          method: state
          numeric: true
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: person.chantal
              - entity: sensor.chantal_phone_battery_level
              - entity: sensor.chantal_phone_battery_health
              - entity: binary_sensor.chantal_phone_is_charging
              - entity: sensor.chantal_phone_charger_type
              - entity: sensor.chantal_phone_battery_temperature
            state_color: true
            show_header_toggle: false
            view_layout:
              column: 3
          - type: entities
            entities:
              - entity: person.stef
              - entity: sensor.stef_phone_battery_level
              - entity: sensor.stef_phone_battery_health
              - entity: binary_sensor.stef_phone_is_charging
              - entity: sensor.stef_phone_charger_type
              - entity: sensor.stef_phone_battery_temperature
            state_color: true
            show_header_toggle: false
            view_layout:
              column: 2
          - type: entities
            entities:
              - entity: person.fiek
              - entity: sensor.fiek_phone_battery_level
              - entity: sensor.stef_phone_battery_health
              - entity: sensor.fiek_phone_battery_state
              - entity: sensor.fiek_phone_charger_type
              - entity: sensor.fiek_phone_battery_temperature
            state_color: true
            show_header_toggle: false
            view_layout:
              column: 1
      - type: custom:auto-entities
        card:
          type: custom:bar-card
          icon: mdi:battery
          height: 20px
          positions:
            icon: 'off'
            indicator: inside
            name: inside
          severity:
            - color: Red
              from: 0
              to: 25
            - color: Orange
              from: 26
              to: 50
            - color: Green
              from: 51
              to: 100
          columns: 1
        show_empty: false
        sort:
          method: state
          reverse: false
          numeric: true
        filter:
          template: >-
            {% for state in states.sensor |
            selectattr('attributes.device_class', '==', 'battery') %}
                {{  state.entity_id }}
            {% endfor %}
  - title: header
    path: header
    icon: mdi:code-braces-box
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.chantal
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/chantal
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_chantal_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_chantal"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.chantal_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.chantal_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.chantal_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.chantal_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.chantal_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_chantal"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_chantal"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.stef
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/stef
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_stef_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_stef"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.stef_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.stef_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.stef_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.stef_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.stef_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_stef"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_stef"].state; 
                        ]]]
              - type: custom:button-card
                aspect_ratio: 1/1.5
                entity: person.fiek
                show_entity_picture: true
                show_name: false
                show_state: false
                triggers_update: all
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/fiek
                custom_fields:
                  location: |
                    [[[
                      var location = entity.state;
                      if (location == "not_home") location = "Weg";
                      else if (location == "home") location = "Thuis";
                      return `${location}`;
                    ]]]
                  location_changed: |
                    [[[
                      var changed = states["sensor.person_fiek_last_changed_formatted"].state;
                      return `${changed}`;
                    ]]]
                  location_icon: |
                    [[[
                      var icon = states["sensor.person_zone_color_icon_fiek"];           
                      return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                    ]]]
                  battery: |
                    [[[
                      var battery = states['sensor.fiek_phone_battery_level'];
                      return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]
                  network: |
                    [[[
                      var signal = states['sensor.fiek_phone_wifi_signal_strength'];
                      return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                    ]]]  
                  distance: |
                    [[[
                      var distance = states['sensor.fiek_distance_from_home'].state;
                      return distance == 'home'
                        ? ``
                        : `${distance}`;
                    ]]]
                styles:
                  entity_picture:
                    - top: 17%
                  custom_fields:
                    network:
                      - position: absolute
                      - left: 5px
                      - top: 0px
                      - color: |-
                          [[[            
                            var wifi_signal = states['sensor.fiek_phone_wifi_signal_strength'].state;
                            if (wifi_signal == -1)
                              return "var(--info-color)";
                            if (wifi_signal >= -60)
                              return "var(--success-color)";
                            if (wifi_signal >= -75)
                              return "var(--warning-color)";            
                            else "var(--error-color)"
                          ]]]
                    battery:
                      - position: absolute
                      - right: 5px
                      - top: 5px
                      - font-size: 10px
                      - color: |-
                          [[[
                            var bat_lvl = states["sensor.fiek_phone_battery_level"].state;
                            if (bat_lvl < 25) 
                              return "var(--error-color)";
                            else if (bat_lvl < 50) 
                              return "var(--warning-color)";
                            else 
                              return "var(--success-color)";
                          ]]]
                    location:
                      - position: absolute
                      - right: 5px
                      - bottom: 20px
                      - font-size: 12px
                      - font-weight: bolder
                    location_changed:
                      - position: absolute
                      - right: 5px
                      - bottom: 5px
                      - font-size: 10px
                    location_icon:
                      - position: absolute
                      - left: 5px
                      - bottom: |-
                          [[[
                            var location = entity.state;
                            if (location == "home") return "5px"; 
                            else return "20px";
                          ]]]      
                      - color: |-
                          [[[     
                            return states["sensor.person_zone_color_icon_fiek"].state; 
                          ]]]
                    distance:
                      - position: absolute
                      - left: 5px
                      - bottom: 5px
                      - font-size: 10px
                  icon:
                    - width: 75%
                    - border: 4px solid
                    - border-radius: 0%
                    - border-color: |-
                        [[[     
                          return states["sensor.person_zone_color_icon_fiek"].state; 
                        ]]]
      - type: custom:mushroom-template-card
        primary: >-
          Stef's verwachte aankomst tijd: {{
          states['sensor.estimated_time_of_arrival_stef'].state}}
        secondary: >-
          {% set travel_sensor = 'sensor.travel_time_stef_to_home' %} {% set
          duration = state_attr(travel_sensor, 'duration') | round() %} {% set
          route = state_attr(travel_sensor, 'route') %}  Via: {{ route |
          default('Unknown  Route') | replace("Best-", "") }}  {{'\n'}}Totale
          reisstijd: {{ duration | default(0) if duration is not none else 0 }}
          min      {{'\n'}}Updated {{states[travel_sensor].last_changed |
          relative_time }} ago. 
        icon: mdi:waze
        entity: sensor.travel_time_stef_to_home
        fill_container: false
        multiline_secondary: true
        layout: vertical
        icon_color: light-blue
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
      - type: custom:mushroom-template-card
        primary: >-
          Fiek's verwachte aankomst tijd: {{
          states['sensor.estimated_time_of_arrival_fiek'].state}}
        secondary: >-
          {% set travel_sensor = 'sensor.travel_time_fiek_to_home' %} {% set
          duration = state_attr(travel_sensor, 'duration') | round() %} {% set
          route = state_attr(travel_sensor, 'route') %}  Via: {{ route |
          default('Unknown  Route') | replace("Best-", "") }}  {{'\n'}}Totale
          reisstijd: {{ duration | default(0) if duration is not none else 0 }}
          min      {{'\n'}}Updated {{states[travel_sensor].last_changed |
          relative_time }} ago. 
        icon: mdi:waze
        entity: sensor.travel_time_fiek_phone_to_home
        fill_container: false
        multiline_secondary: true
        layout: vertical
        icon_color: light-blue
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: 'Header used in declutter:'
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: |-
                      {{ 
                      'mdi:home' if states('sensor.is_anyone_home') == 'True' 
                      else 'mdi:home-off' 
                      }}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/home
                    icon_color: |-
                      {{ 
                      'green' if states('sensor.is_anyone_home') == 'True' 
                      else 'red' 
                      }}
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    fill_container: true
                    badge_icon: >-
                      {% set
                      people_at_home=states('sensor.number_of_people_home') |
                      int %}

                      {{ 'mdi:numeric-' ~ people_at_home if people_at_home > 0
                      else '' }}
                    badge_color: orange
                    multiline_secondary: false
                  - type: custom:mushroom-light-card
                    secondary_info: none
                    show_brightness_control: false
                    show_color_temp_control: false
                    use_light_color: true
                    collapsible_controls: false
                    layout: vertical
                    primary_info: none
                    icon_type: icon
                    double_tap_action:
                      action: call-service
                      data: {}
                      target:
                        entity_id: light.group_all
                      perform_action: light.turn_off
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/lights
                    hold_action:
                      action: none
                    entity: light.lampen_zonder_keuken
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: mdi:account-group-outline
                    icon_color: |-
                      {% if states('sensor.is_anyone_home') == 'False' %}
                        green
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/persons
                    fill_container: true
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    badge_icon: ''
                    badge_color: ''
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: >-
                      {% if is_state("sensor.is_any_mediaplayer_playing",
                      "True") %}
                        mdi:music
                      {% else %} 
                        mdi:music-off
                      {% endif %}
                    icon_color: >-
                      {% if is_state("sensor.is_any_mediaplayer_playing",
                      "True") %}
                        green
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/mediaplayers
                    fill_container: true
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    badge_icon: >-
                      {% set active_mediaplayers =
                      states('sensor.mediaplayers_active_count') | int %}

                      {{ 'mdi:numeric-' ~ active_mediaplayers if
                      active_mediaplayers > 0 else '' }}
                    badge_color: ''
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: >-
                      {% set temperature = (state_attr('climate.thermostat',
                      'temperature') | default(15)) %}

                      {% if temperature is none %}
                        mdi:alert-decagram-outline
                      {% elif is_state("binary_sensor.hot_tap_water", "on") %}
                        mdi:water-pump
                      {% elif temperature <= 15%}
                        mdi:thermometer
                      {% elif temperature < 20.5 %}
                        mdi:radiator
                      {% else %}
                        mdi:fire
                      {% endif %}
                    icon_color: >-
                      {% set temperature = (state_attr('climate.thermostat',
                      'temperature') | default(15)) %}

                      {% if  temperature is none or
                      is_state("binary_sensor.hot_tap_water", "on") %}
                        red
                      {% elif temperature <= 15%}
                        disabled
                      {% elif temperature < 19.5 %}  
                        yellow
                      {% elif temperature <  19.9 %}
                        orange
                      {% else %}
                        red
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/verwarming
                    fill_container: true
                    badge_icon: ''
                    picture: ''
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    badge_color: ''
                    entity: climate.thermostat
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: mdi:recycle-variant
                    icon_color: >
                      {% set upcomming_trash =
                      states('sensor.afvalinfo_first_upcomming_trash_type') %}

                      {% if 'Papier' in upcomming_trash %}
                        blue
                      {% elif 'PBD' in upcomming_trash %}
                        pink
                      {% elif 'GFT' in upcomming_trash %}
                        green
                      {% else %} 
                        red
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/afval
                    fill_container: true
                    badge_icon: ''
                    picture: ''
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    badge_color: ''
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: >
                      {% set onlinestate =
                      is_state("binary_sensor.internet_troubleshooting", "on")
                      %}

                      {% if onlinestate %}

                      mdi:web-check

                      {% else %}

                      mdi:web-off

                      {% endif %}
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/internet
                    icon_color: >
                      {% set onlinestate =
                      is_state("binary_sensor.internet_troubleshooting", "on")
                      %}

                      {% if onlinestate %}
                       green
                      {% else %}
                       red
                      {% endif %}
                    layout: vertical
                    fill_container: true
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: mdi:racing-helmet
                    icon_color: ''
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/f1
                    fill_container: true
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: mdi:server-outline
                    icon_color: >-
                      {% set current_cpu =
                      states('sensor.buurmansbignas_cpu_gebruik_totaal') | int
                      %}

                      {% if current_cpu < 10 %}
                        blue
                      {% elif current_cpu < 30 %}
                        green
                      {% elif current_cpu < 50 %}
                        yellow
                      {% elif current_cpu < 75 %}
                        orange
                      {% else %}
                        red
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/homelab
                    fill_container: true
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: custom:mushroom-template-card
                    primary: ''
                    secondary: ''
                    icon: >-
                      {% set lowest_battery =
                      states('sensor.lowest_battery_percentage') | int %}

                      {% if lowest_battery < 10 %}
                        mdi:battery-10
                      {% elif lowest_battery < 20 %}
                        mdi:battery-20
                      {% elif lowest_battery < 30 %}
                        mdi:battery-30
                      {% elif lowest_battery < 40 %}
                        mdi:battery-40
                      {% elif lowest_battery < 50 %}
                        mdi:battery-50
                      {% elif lowest_battery < 60 %}
                        mdi:battery-60
                      {% elif lowest_battery < 70 %}
                        mdi:battery-70
                      {% elif lowest_battery < 80 %}
                        mdi:battery-80
                      {% elif lowest_battery < 90 %}
                        mdi:battery-90
                      {% else %}
                        mdi:battery-check
                      {% endif %}
                    icon_color: >-
                      {% set lowest_battery =
                      states('sensor.lowest_battery_percentage') | int %}

                      {% if lowest_battery < 20 %}
                        red
                      {% elif lowest_battery < 30 %}
                        orange
                      {% elif lowest_battery < 40 %}
                        yellow
                      {% else %}
                        green
                      {% endif %}
                    layout: vertical
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/battery
                    fill_container: false
                    badge_icon: ''
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
          - type: markdown
            content: |-
              The header icons is used to edit the main headers of all pages.

               * Make a backup!
               * Edit Dashboard
               * Copy header
               * Got Raw Configuration Editor
               * Remove the previous decluttering_template
              this should be everything above the start of ```views:``` section
               * paste the header in VSCODE
               * select all and add 3 tabs
               * paste the following above the header:

              ```
              decluttering_templates:
                navigation_header:
                  card:
              ```
              copy all and paste it above the ```views:``` section
            title: Header example
      - type: vertical-stack
        cards:
          - type: markdown
            content: >-
              <ha-alert alert-type="error">#f44336 or
              var(--error-color)</ha-alert>

              <ha-alert alert-type="warning">#ff9800 or var(--warning-color)
              </ha-alert>

              <ha-alert alert-type="info">#2196f3 or
              var(--info-color)</ha-alert>

              <ha-alert alert-type="success">#4caf50 or
              var(--success-color)</ha-alert>
          - type: horizontal-stack
            cards:
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: call-service
                  service: frontend.reload_themes
                  data: {}
                  target: {}
                show_state: false
                name: Themes
                icon: mdi:reload
              - type: custom:mushroom-entity-card
                entity: automation.github_push_changed
                icon_type: entity-picture
                primary_info: name
                name: Push changes to GitHub
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                tap_action:
                  action: call-service
                  service: shell_command.push_to_github
                  data: {}
                  target: {}
                secondary_info: none
                icon_color: pink
                fill_container: true
                layout: vertical
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: call-service
                  service: python_script.reload
                  data: {}
                  target: {}
                icon: mdi:reload
                name: Python
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: navigate
                  navigation_path: /config/logs
                icon: mdi:script-text-key-outline
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: call-service
                  service: python_script.reload
                  data: {}
                  target: {}
                icon: mdi:reload
                name: Python
              - show_name: true
                show_icon: true
                type: button
                tap_action:
                  action: call-service
                  service: watchman.report
                  target: {}
                  data:
                    create_file: true
                    send_notification: false
                    parse_config: false
                    chunk_size: false
                icon: mdi:script-text-key-outline
                entity: automation.watchman_create_report
                show_state: false
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:button-card
            aspect_ratio: 1/1.5
            entity: person.chantal
            show_entity_picture: true
            show_name: false
            show_state: false
            triggers_update: all
            tap_action:
              action: navigate
              navigation_path: /lovelace/chantal
            custom_fields:
              location: |
                [[[
                  var location = entity.state;
                  if (location == "not_home") location = "Weg";
                  else if (location == "home") location = "Thuis";
                  return `${location}`;
                ]]]
              location_changed: |
                [[[
                  var changed = states["sensor.person_chantal_last_changed_formatted"].state;
                  return `${changed}`;
                ]]]
              location_icon: |
                [[[
                  var icon = states["sensor.person_zone_color_icon_chantal"];           
                  return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                ]]]
              battery: |
                [[[
                  var battery = states['sensor.chantal_phone_battery_level'];
                  return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]
              network: |
                [[[
                  var signal = states['sensor.chantal_phone_wifi_signal_strength'];
                  return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]  
              distance: |
                [[[
                  var distance = states['sensor.chantal_distance_from_home'].state;
                  return distance == 'home'
                    ? ``
                    : `${distance}`;
                ]]]
            styles:
              entity_picture:
                - top: 17%
              custom_fields:
                network:
                  - position: absolute
                  - left: 5px
                  - top: 0px
                  - color: |-
                      [[[            
                        var wifi_signal = states['sensor.chantal_phone_wifi_signal_strength'].state;
                        if (wifi_signal == -1)
                          return "var(--info-color)";
                        if (wifi_signal >= -60)
                          return "var(--success-color)";
                        if (wifi_signal >= -75)
                          return "var(--warning-color)";            
                        else "var(--error-color)"
                      ]]]
                battery:
                  - position: absolute
                  - right: 5px
                  - top: 5px
                  - font-size: 10px
                  - color: |-
                      [[[
                        var bat_lvl = states["sensor.chantal_phone_battery_level"].state;
                        if (bat_lvl < 25) 
                          return "var(--error-color)";
                        else if (bat_lvl < 50) 
                          return "var(--warning-color)";
                        else 
                          return "var(--success-color)";
                      ]]]
                location:
                  - position: absolute
                  - right: 5px
                  - bottom: 20px
                  - font-size: 12px
                  - font-weight: bolder
                location_changed:
                  - position: absolute
                  - right: 5px
                  - bottom: 5px
                  - font-size: 10px
                location_icon:
                  - position: absolute
                  - left: 5px
                  - bottom: |-
                      [[[
                        var location = entity.state;
                        if (location == "home") return "5px"; 
                        else return "20px";
                      ]]]      
                  - color: |-
                      [[[     
                        return states["sensor.person_zone_color_icon_chantal"].state; 
                      ]]]
                distance:
                  - position: absolute
                  - left: 5px
                  - bottom: 5px
                  - font-size: 10px
              icon:
                - width: 75%
                - border: 4px solid
                - border-radius: 0%
                - border-color: |-
                    [[[     
                      return states["sensor.person_zone_color_icon_chantal"].state; 
                    ]]]
          - type: custom:button-card
            aspect_ratio: 1/1.5
            entity: person.stef
            show_entity_picture: true
            show_name: false
            show_state: false
            triggers_update: all
            tap_action:
              action: navigate
              navigation_path: /lovelace/stef
            custom_fields:
              location: |
                [[[
                  var location = entity.state;
                  if (location == "not_home") location = "Weg";
                  else if (location == "home") location = "Thuis";
                  return `${location}`;
                ]]]
              location_changed: |
                [[[
                  var changed = states["sensor.person_stef_last_changed_formatted"].state;
                  return `${changed}`;
                ]]]
              location_icon: |
                [[[
                  var icon = states["sensor.person_zone_color_icon_stef"];           
                  return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                ]]]
              battery: |
                [[[
                  var battery = states['sensor.stef_phone_battery_level'];
                  return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]
              network: |
                [[[
                  var signal = states['sensor.stef_phone_wifi_signal_strength'];
                  return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]  
              distance: |
                [[[
                  var distance = states['sensor.stef_distance_from_home'].state;
                  return distance == 'home'
                    ? ``
                    : `${distance}`;
                ]]]
            styles:
              entity_picture:
                - top: 17%
              custom_fields:
                network:
                  - position: absolute
                  - left: 5px
                  - top: 0px
                  - color: |-
                      [[[            
                        var wifi_signal = states['sensor.stef_phone_wifi_signal_strength'].state;
                        if (wifi_signal == -1)
                          return "var(--info-color)";
                        if (wifi_signal >= -60)
                          return "var(--success-color)";
                        if (wifi_signal >= -75)
                          return "var(--warning-color)";            
                        else "var(--error-color)"
                      ]]]
                battery:
                  - position: absolute
                  - right: 5px
                  - top: 5px
                  - font-size: 10px
                  - color: |-
                      [[[
                        var bat_lvl = states["sensor.stef_phone_battery_level"].state;
                        if (bat_lvl < 25) 
                          return "var(--error-color)";
                        else if (bat_lvl < 50) 
                          return "var(--warning-color)";
                        else 
                          return "var(--success-color)";
                      ]]]
                location:
                  - position: absolute
                  - right: 5px
                  - bottom: 20px
                  - font-size: 12px
                  - font-weight: bolder
                location_changed:
                  - position: absolute
                  - right: 5px
                  - bottom: 5px
                  - font-size: 10px
                location_icon:
                  - position: absolute
                  - left: 5px
                  - bottom: |-
                      [[[
                        var location = entity.state;
                        if (location == "home") return "5px"; 
                        else return "20px";
                      ]]]      
                  - color: |-
                      [[[     
                        return states["sensor.person_zone_color_icon_stef"].state; 
                      ]]]
                distance:
                  - position: absolute
                  - left: 5px
                  - bottom: 5px
                  - font-size: 10px
              icon:
                - width: 75%
                - border: 4px solid
                - border-radius: 0%
                - border-color: |-
                    [[[     
                      return states["sensor.person_zone_color_icon_stef"].state; 
                    ]]]
          - type: custom:button-card
            aspect_ratio: 1/1.5
            entity: person.fiek
            show_entity_picture: true
            show_name: false
            show_state: false
            triggers_update: all
            tap_action:
              action: navigate
              navigation_path: /lovelace/fiek
            custom_fields:
              location: |
                [[[
                  var location = entity.state;
                  if (location == "not_home") location = "Weg";
                  else if (location == "home") location = "Thuis";
                  return `${location}`;
                ]]]
              location_changed: |
                [[[
                  var changed = states["sensor.person_fiek_last_changed_formatted"].state;
                  return `${changed}`;
                ]]]
              location_icon: |
                [[[
                  var icon = states["sensor.person_zone_color_icon_fiek"];           
                  return `<ha-icon icon='${icon.attributes.icon}' style='width: 16px;'></ha-icon>`;      
                ]]]
              battery: |
                [[[
                  var battery = states['sensor.fiek_phone_battery_level'];
                  return `${battery.state}%<ha-icon icon='${battery.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]
              network: |
                [[[
                  var signal = states['sensor.fiek_phone_wifi_signal_strength'];
                  return `<ha-icon icon='${signal.attributes.icon}' style='width: 16px;'></ha-icon>`;
                ]]]  
              distance: |
                [[[
                  var distance = states['sensor.fiek_distance_from_home'].state;
                  return distance == 'home'
                    ? ``
                    : `${distance}`;
                ]]]
            styles:
              entity_picture:
                - top: 17%
              custom_fields:
                network:
                  - position: absolute
                  - left: 5px
                  - top: 0px
                  - color: |-
                      [[[            
                        var wifi_signal = states['sensor.fiek_phone_wifi_signal_strength'].state;
                        if (wifi_signal == -1)
                          return "var(--info-color)";
                        if (wifi_signal >= -60)
                          return "var(--success-color)";
                        if (wifi_signal >= -75)
                          return "var(--warning-color)";            
                        else "var(--error-color)"
                      ]]]
                battery:
                  - position: absolute
                  - right: 5px
                  - top: 5px
                  - font-size: 10px
                  - color: |-
                      [[[
                        var bat_lvl = states["sensor.fiek_phone_battery_level"].state;
                        if (bat_lvl < 25) 
                          return "var(--error-color)";
                        else if (bat_lvl < 50) 
                          return "var(--warning-color)";
                        else 
                          return "var(--success-color)";
                      ]]]
                location:
                  - position: absolute
                  - right: 5px
                  - bottom: 20px
                  - font-size: 12px
                  - font-weight: bolder
                location_changed:
                  - position: absolute
                  - right: 5px
                  - bottom: 5px
                  - font-size: 10px
                location_icon:
                  - position: absolute
                  - left: 5px
                  - bottom: |-
                      [[[
                        var location = entity.state;
                        if (location == "home") return "5px"; 
                        else return "20px";
                      ]]]      
                  - color: |-
                      [[[     
                        return states["sensor.person_zone_color_icon_fiek"].state; 
                      ]]]
                distance:
                  - position: absolute
                  - left: 5px
                  - bottom: 5px
                  - font-size: 10px
              icon:
                - width: 75%
                - border: 4px solid
                - border-radius: 0%
                - border-color: |-
                    [[[     
                      return states["sensor.person_zone_color_icon_fiek"].state; 
                    ]]]
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            secondary: eten
            icon: mdi:food-fork-drink
            entity: scene.etenstijd
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "eten" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.etenstijd
          - type: custom:mushroom-template-card
            primary: ''
            secondary: avond
            icon: mdi:gamepad-variant-outline
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "avond" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              target:
                entity_id: automation.set_avond_licht
              data:
                skip_condition: true
            entity: automation.set_avond_licht
          - type: custom:mushroom-light-card
            entity: light.group_stef_kamer
            secondary_info: name
            show_brightness_control: false
            show_color_temp_control: false
            use_light_color: true
            collapsible_controls: false
            layout: vertical
            primary_info: none
            icon_type: icon
            double_tap_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              data:
                skip_condition: true
              target:
                entity_id: automation.koffie_tijd
            hold_action:
              action: none
            icon: mdi:coffee
            icon_color: deep-orange
            name: koffie!
            show_color_control: false
          - type: custom:mushroom-template-card
            primary: ''
            secondary: schemer
            icon: mdi:weather-night
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "schemer" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              target:
                entity_id: automation.set_schemer_light
              data:
                skip_condition: true
            entity: automation.set_schemer_light
          - type: custom:mushroom-template-card
            primary: ''
            secondary: ochtend
            icon: mdi:weather-sunset-up
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "ochtend" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: scene.turn_on
              data: {}
              target:
                entity_id: scene.ochtendlicht
            entity: scene.ochtendlicht
          - type: custom:mushroom-template-card
            primary: ''
            secondary: slapen
            icon: |-
              {% if states("input_select.current_active_scene") == "slapen" %}
                mdi:sleep
              {%else%}
                mdi:sleep-off
              {%endif%}
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "slapen" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              target:
                entity_id: automation.sleep_time_activated
              perform_action: automation.trigger
              data:
                skip_condition: true
            entity: automation.sleep_time_activated
            fill_container: false
  - title: sandbox
    path: sandbox
    icon: mdi:timer-sand-paused
    badges: []
    cards:
      - type: custom:decluttering-card
        template: navigation_header
      - type: vertical-stack
        cards:
          - type: custom:uptime-card
            entity: binary_sensor.kpn_modem_ping_uptime
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            icon: mdi:web
            ko_icon: mdi:web-cancel
            update_interval: 30
            severity: 10
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            alias:
              ok: Connected
              ko: Disconnected
            alignment:
              icon_first: false
              tooltip_first: false
            tooltip:
              hour24: true
            bar:
              height: 20
              round: 4
          - type: custom:uptime-card
            entity: binary_sensor.internet_ping_uptime
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            icon: mdi:web
            ko_icon: mdi:web-cancel
            update_interval: 30
            severity: 10
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            alias:
              ok: Connected
              ko: Disconnected
            alignment:
              icon_first: false
              tooltip_first: false
            tooltip:
              hour24: true
            bar:
              height: 20
              round: 4
            title_template: Google ping
          - type: custom:uptime-card
            entity: binary_sensor.pi_hole_main_ping_uptime
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            icon: mdi:web
            ko_icon: mdi:web-cancel
            update_interval: 30
            severity: 10
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            alias:
              ok: Connected
              ko: Disconnected
            alignment:
              icon_first: false
              tooltip_first: false
            tooltip:
              hour24: true
            bar:
              height: 20
              round: 4
            title_template: Pi-hole Main
          - type: custom:uptime-card
            entity: binary_sensor.pi_hole_fallback_ping_uptime
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            icon: mdi:web
            ko_icon: mdi:web-cancel
            update_interval: 30
            severity: 10
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            alias:
              ok: Connected
              ko: Disconnected
            alignment:
              icon_first: false
              tooltip_first: false
            tooltip:
              hour24: true
            bar:
              height: 20
              round: 4
            clip: {}
            tap_action: {}
            blink: {}
            title_template: Pi-hole Fallback
          - type: custom:uptime-card
            entity: binary_sensor.cloudflare_tunnels_ping_uptime
            hours_to_show: 48
            title_adaptive_color: true
            status_adaptive_color: true
            icon: mdi:web
            ko_icon: mdi:web-cancel
            update_interval: 30
            severity: 10
            icon_adaptive_color: true
            tooltip_adaptive_color: true
            alias:
              ok: Connected
              ko: Disconnected
            alignment:
              icon_first: false
              tooltip_first: false
            tooltip:
              hour24: true
            bar:
              height: 20
              round: 4
            title_template: 'Cloudflare Tunnels '
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: switch.woonkamer_smartplug_blue
                secondary_info: last-changed
              - entity: sensor.woonkamer_smartplug_blue_power
              - entity: sensor.woonkamer_smartplug_blue_energy
              - entity: switch.woonkamer_smartplug_orange
                secondary_info: last-changed
              - entity: sensor.woonkamer_smartplug_orange_power
              - entity: sensor.woonkamer_smartplug_orange_energy
            title: Smart plugs
            state_color: true
            show_header_toggle: false
          - type: entities
            entities:
              - entity: sensor.homelab_smart_switch_tuya_vermogen
                name: Active power
              - entity: switch.homelab_smart_switch_tuya_stopcontact
                secondary_info: last-changed
                icon: ''
                name: Toggle
            title: Tuya - HP proxmox backup server
            state_color: true
            show_header_toggle: false
      - type: custom:bar-card
        columns: 1
        entity_row: false
        title: Pi-hole main
        height: 20px
        width: 1
        decimal: 2
        entities:
          - entity: sensor.lxc_pihole_main_210_cpu_used
            name: CPU
            icon: mdi:cpu-64-bit
          - entity: sensor.lxc_pihole_main_210_memory_used_percentage
            name: RAM
            icon: mdi:brain
          - entity: sensor.lxc_pihole_main_210_disk_used_percentage
            name: Disc
            icon: mdi:harddisk
        positions:
          indicator: inside
      - type: entities
        entities:
          - entity: sensor.lxc_cloudflare_ip_restricted_215_cpu_used
          - type: custom:bar-card
            entities:
              - entity: sensor.lxc_cloudflare_ip_restricted_215_cpu_used
            positions:
              icon: 'off'
              indicator: 'off'
              value: inside
            entity_row: true
            style: |
              bar-card-value {
                font-size: 0px;
              }
              bar-card-value:after {
                content: "00:20:00";
                font-size: var(--mdc-typography-body1-font-size,1rem);
              }
      - entities:
          - entity: sensor.lxc_pihole_main_210_disk_used_percentage
        positions:
          icon: outside
          indicator: 'off'
        title: Custom CSS Layout
        type: custom:bar-card
        decimal: 2
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:bar-card
            columns: 1
            entity_row: false
            title: Pi-hole main
            height: 20px
            width: 1
            decimal: 2
            entities:
              - entity: sensor.lxc_pihole_main_210_cpu_used
                name: CPU
                icon: mdi:cpu-64-bit
              - entity: sensor.lxc_pihole_main_210_memory_used_percentage
                name: RAM
                icon: mdi:brain
              - entity: sensor.lxc_pihole_main_210_disk_used_percentage
                name: Disc
                icon: mdi:harddisk
            positions:
              indicator: inside
          - type: vertical-stack
            cards:
              - show_state: false
                show_name: false
                type: picture-entity
                style: width:10%
                image: https://brands.home-assistant.io/_/pi_hole/icon.png
                entity: sensor.lxc_pihole_main_210_last_boot
              - type: custom:mushroom-template-card
                primary: '{{ states(''sensor.lxc_pihole_main_210_last_boot'') }}'
                secondary: ''
                icon: >-
                  {% if is_state('binary_sensor.lxc_pihole_main_210_status',
                  'on') %}
                    mdi:play-circle
                  {% else %}
                    mdi:stop-circle
                  {% endif %}
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                badge_icon: ''
                tap_action:
                  action: more-info
                entity: sensor.lxc_pihole_main_210_last_boot
                icon_color: >-
                  {% if is_state('binary_sensor.lxc_pihole_main_210_status',
                  'on') %}
                    green
                  {% else %}
                    red
                  {% endif %}
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            secondary: eten
            icon: mdi:food-fork-drink
            entity: scene.etenstijd
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "eten" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.etenstijd
          - type: custom:mushroom-template-card
            primary: ''
            secondary: avond
            icon: mdi:gamepad-variant-outline
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "avond" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              target:
                entity_id: automation.set_avond_licht
              data:
                skip_condition: true
            entity: automation.set_avond_licht
          - type: custom:mushroom-light-card
            entity: light.group_stef_kamer
            secondary_info: name
            show_brightness_control: false
            show_color_temp_control: false
            use_light_color: true
            collapsible_controls: false
            layout: vertical
            primary_info: none
            icon_type: icon
            double_tap_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              data:
                skip_condition: true
              target:
                entity_id: automation.koffie_tijd
            hold_action:
              action: none
            icon: mdi:coffee
            icon_color: deep-orange
            name: koffie!
            show_color_control: false
          - type: custom:mushroom-template-card
            primary: ''
            secondary: schemer
            icon: mdi:weather-night
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "schemer" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: automation.trigger
              target:
                entity_id: automation.set_schemer_light
              data:
                skip_condition: true
            entity: automation.set_schemer_light
          - type: custom:mushroom-template-card
            primary: ''
            secondary: ochtend
            icon: mdi:weather-sunset-up
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "ochtend" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              service: scene.turn_on
              data: {}
              target:
                entity_id: scene.ochtendlicht
            entity: scene.ochtendlicht
          - type: custom:mushroom-template-card
            primary: ''
            secondary: slapen
            icon: |-
              {% if states("input_select.current_active_scene") == "slapen" %}
                mdi:sleep
              {%else%}
                mdi:sleep-off
              {%endif%}
            layout: vertical
            icon_color: |-
              {% if states("input_select.current_active_scene") == "slapen" %}
                amber
              {%else%}
                disabled
              {%endif%}
            multiline_secondary: true
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: call-service
              target:
                entity_id: automation.sleep_time_activated
              perform_action: automation.trigger
              data:
                skip_condition: true
            entity: automation.sleep_time_activated
            fill_container: false
  - title: chantal
    path: chantal
    icon: mdi:account
    theme: buurmans-bubble-theme
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
      - type: map
        default_zoom: 13
        auto_fit: true
        entities:
          - entity: person.chantal
        hours_to_show: 48
        title: Chantal
        aspect_ratio: '1:1.4'
        theme_mode: dark
  - title: Stef
    path: stef
    icon: mdi:account
    type: custom:horizontal-layout
    theme: buurmans-bubble-theme
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: map
            default_zoom: 13
            auto_fit: true
            entities:
              - entity: person.stef
            hours_to_show: 48
            title: Stef
            aspect_ratio: '1:1.4'
            theme_mode: dark
  - title: Fiek
    path: fiek
    icon: mdi:account
    theme: buurmans-bubble-theme
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: navigation_header
          - type: map
            default_zoom: 13
            auto_fit: true
            entities:
              - entity: person.fiek
            hours_to_show: 96
            dark_mode: true
            title: Fiek
            aspect_ratio: '1:1.4'
  - title: Sun
    path: sun
    icon: mdi:sun-clock
    theme: buurmans-bubble-theme
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:horizon-card
            language: nl
            fields:
              dusk: true
              noon: true
              dawn: true
            southern_flip: false
        title: Info
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: >-
              Next Sun dawn:    {{ as_timestamp(state_attr("sun.sun",
              "next_dawn")) | timestamp_custom('%d-%m-%Y %H:%M:%S') }}

              Next Sun rise:       {{ as_timestamp(state_attr("sun.sun",
              "next_rising")) | timestamp_custom('%d-%m-%Y %H:%M:%S') }}

              Next Sun setting: {{ as_timestamp(state_attr("sun.sun",
              "next_setting")) | timestamp_custom('%d-%m-%Y %H:%M:%S') }}

              Next Sun dusk:     {{ as_timestamp(state_attr("sun.sun",
              "next_dusk")) | timestamp_custom('%d-%m-%Y %H:%M:%S') }}

              Current elevation: {{ state_attr("sun.sun","elevation")}}°

              {% if state_attr("sun.sun","elevation") > -6 %}

              Sun Light

              {% else %}

              Moon light

              {% endif %}
          - type: entities
            entities:
              - entity: sun.sun
              - entity: sensor.is_sun_up
              - entity: sensor.is_sun_down
              - entity: sensor.is_almost_dark_downstairs
          - type: custom:mushroom-select-card
            entity: input_select.current_active_scene
            fill_container: true
          - type: tile
            entity: sensor.lowest_illuminance_downstairs
          - type: history-graph
            entities:
              - entity: sensor.lowest_illuminance_downstairs
            logarithmic_scale: false
            min_y_axis: 0
            max_y_axis: 100
            fit_y_data: true
        title: Meer info
  - title: motor
    path: motor
    icon: mdi:bike
    type: panel
    cards:
      - type: map
        default_zoom: 12
        auto_fit: true
        entities:
          - entity: person.fiek
        aspect_ratio: '1:1.5'
        theme_mode: dark
        hours_to_show: 48
